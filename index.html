<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Secret Santa</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script> 
</head>
<body>
  <h1>Secret Santa</h1>
  <input id="inputEl" type="text" />

  <script type="text/javascript">
    // const inputValue = document.getElementById("inputEl").value;

    // console.log(inputValue)
  </script>

  <py-script>
    from array import array
    from cgi import test
    from operator import length_hint
    import random

    from js import console

    coded_length = 15
    key_and_length_offset = 100

    def decrypt(name):
      name_array = []
      for l in name:
          name_array.append(ord(l))
      out_name = ""
      key = name_array[0] - key_and_length_offset
      length = name_array[1] - key_and_length_offset
      iteration = -1
      skip_first = 2
      for l in name_array:
          iteration += 1
          if iteration < skip_first:
              continue
          if iteration - skip_first >= length:
              return out_name
          out_name += chr(l - key)

    input = Element('inputEl').element.value    
    print(decrypt(input))

  </py-script>
</body>
</html>